<html>
<head>
    <link href="../resources/css/doc-style.css" media="all" rel="stylesheet" type="text/css" />
    <script src="../resources/js/jff5neq.js" type="text/javascript"></script>
    <script type="text/javascript">
        try{Typekit.load();}catch(e){}
    </script>
    <script src="../resources/js/jquery.min.js"></script>
    <script src="../resources/js/vkbeautify.js"></script>
    <script src="../resources/js/getAppValues.js"></script>

    <title>Concur Provisioning</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
<div class="header clearfix">
    <div class="logo-container">
        <img src="../resources/img/okta-logo-white.png" alt="Okta" />
    </div>
</div>
<div class="okta-instructions">

    <div id="loginAdminApp" class="okta-callout okta-error" style="display: none;"><span class="icon-24 icon-error"></span>
    <p><b>Concur Provisioning Hold:</b> Due to recent customer issues, we are putting a temporary hold on customers setting up new Concur provisioning integrations. 
    We are working with Concur to improve UD support for the Concur application integration and refine the migration path for existing customer implementations. 
    This temporary hold applies to both the Early Access version, which supports Universal Directory/Rich Provisioning, and the Generally Available version.</p>

    <p>If you have already requested Okta to enable the Early Access UD feature, please do not make the integration available to your end users. 
    If you have a working integration in place, you can continue to use it as is, without making any modifications to the application.<p>

   <p>We are actively working with Concur to resolve this situation. For questions and/or concerns about this delay, please contact Okta Support.<p>
   </div>

    <!-- Moved this to the Notes section, below until we remove the hold, above.
    <div class="okta-callout okta-error" style="display: none;"><span class="icon-24 icon-error"></span>
        <p>To reconfigure any of the <strong>General Settings</strong> or <strong>Sign-On Options</strong>, uncheck the <strong>Enable provisioning features</strong> box, and use the <strong>Previous</strong> and <strong>Next</strong> buttons to navigate through the configuration screens.</p>
    </div>
    -->

    <h1>Configuring Provisioning for Concur</h1>

    <p>This guide provides the steps required to configure Provisioning for Concur.</p>

    <div class="okta-callout okta-warning"><span class="icon-24 icon-warning"></span>

        <p><strong>Notes</strong></p>

        <ul>

<li><p>In order to enable UD support for Concur, contact the Okta support team and request the following <strong>Early Access</strong> feature flag be enabled for your Okta org:</p>
<p>PROV_CONCUR_CLOUD_DIRECTORY_ENABLE</p> 
<p>You will have to create a new instance of the Concur application.</p></li>            

<li>
<p>To reconfigure any of the <strong>General Settings</strong> or <strong>Sign-On Options</strong>, uncheck the <strong>Enable provisioning features</strong> box, and use the <strong>Previous</strong> and <strong>Next</strong> buttons to navigate through the configuration screens.</p>
</li>
<li>
                <p>The Provisioning capabilities for your Concur app depend upon factors such as your Concur tenant edition. Refer to the <a href="#limitations">Conditions</a> section below for more details.</p>
<p>Additionally, your tenant may have Expense features that require employee data this is not capable of being populated by the current Concur User API, and therefore is not supported by the Okta User Provisioning application. If this is the case, you will be required to populate the additional data using Concur specified import files.</p>
<p>The fields that can be populated by the User Provisioning app are specified: <a href="https://developer.concur.com/api-reference/user/#createUser">here</a>.</p>
        </ul>
    </div>

    <h2>Contents</h2>

    <ul>
<li><a href="#limitations">Conditions</a></li>        
<li><a href="#features">Features</a></li>

        <li><a href="#before">Before You Begin</a></li>

        <li><a href="#requirements">Requirements</a></li>
        <li><a href="#configuration">Configuration Steps</a></li>
        <li><a href="#attributes">Attributes in Base Profile</a></li>
        <li><a href="#schema">Schema Discovery</a></li>
        <li><a href="#tips">Troubleshooting Tips</a></li>
        <li><a href="#Migration">Migration from Legacy Concur Application to Universal Directory</a></li>
    </ul>
    <hr>

    <a name="limitations"></a><h2>Conditions</h2>

<p>A base user record will not be fully provisioned in the following cases:</p>
<ul>
<li><p>Your Concur tenant uses the <strong>Reimbursement Method</strong> field. See below for details:</p>

<p><strong><font color="blue">Standard</font> Edition</strong> - customers who have more than one reimbursement method (<strong>Expense Pay</strong>, <strong>Payroll</strong>, <strong>Co. Check</strong>) can provision users but must import the reimbursement values via a file. Possible values are:</p>
<ul>
<li><p>If the customer uses <strong>ADP Payroll</strong>, then the ADP payroll fields must be populated manually or via an import file.</p></li>
<li><p>If <strong>Expense Pay</strong> or <strong>AP Check</strong> is the single reimbursement method used by customer, then Okta does not need to populate this data (a blank value will populate the single, default method).</p></li>
</ul>

<p><strong><font color="blue">Standard</font>-to-<font color="green">Professional</font> Upgrade Edition</strong> - customers using the corresponding <strong>Payment Manager</strong> batches (that are populated by the values in this field) can provision users, but must import these values via a file. Consult with Concur for possible solutions. For example, if you choose to use one Accounting file, you would not need the individual batches that these field values populate.</p>
<p><strong><font color="green">Professional</font> Edition</strong> – this field does not apply to Professional Edition at this time.
</li>


<li><p>If your Concur tenant uses <strong>Cash Advance</strong> fields, the <strong>Cash Advance Account Code</strong> and <strong>Cash Advance Approver</strong> need to be manually entered or imported via a file, as these fields are not supported in the Concur API.</p></li>


<li><p>If your Concur tenant has more than one <strong>Travel Policy</strong>, then this field needs to be set manually or via a file import. Generally, for <strong>Standard</strong> travel there is only one travel policy. In this case, a blank value via Okta will populate the default value.</p></li>

<li><p>If your Concur tenant uses <strong>Multiple Employee Forms</strong>, provisioning a base record via Okta is not possible.</p></li>

</ul>


<hr>
    <a name="features"></a><h2>Features</h2>
    <p>The following provisioning features are supported:</p>
    <ul>
        <li><p><strong>Schema Discovery</strong></p></li>
        <li><p><strong>Create Users</strong></p>
            <p>Note that Okta only creates a user’s base profile in Concur.</p></li>
        <li><p><strong>Update User Attributes</strong></p></li>
        <li><p><strong>Deactivate Users</strong></p></li>
        <li><p><strong>Sync Password</strong></p></li>
    </ul>
    <p><strong>Note</strong>: Import of Users is currently supported only in CSV format.</p>

    <hr>



    <a name="before"></a><h2>Before You Begin</h2>

    <p>It is important that you determine what <strong>Edition</strong> of Concur you are using before you start configuring provisioning. Here we describe our support for each edition, and how to determine what edition you are using.</p>

    <p>Note that there are few special attributes in Base user profile, whose values vary depending on your Concur Edition, these are described in the <a href="#attributes">Attributes in Base Profile</a> section.

        <a name="edition"></a><h3>Support of Concur Editions</h3>



    <table class="gridtable">

        <tr>

            <th><strong>EDITION</strong></th>
            <th><strong>SUPPORT</strong></th>
        </tr>

        <tr>
            <td align="left"><strong>SMALL BUSINESS</strong></td>
            <td align="left"><p>The Okta-Concur integration does not support the Concur Small Business Edition.</p>
            </td>
        </tr>

        <tr>
            <td align="left"><strong><font color="blue">STANDARD EDITION</font></strong></td>
            <td align="left"><p>Okta supports provisioning functionality for Concur Standard Edition. Note that Okta only creates a base user record in Concur. Standard Edition clients that are not using extended features can use the User Provisioning app to add records without having to import additional data. However, even some Standard Edition features require additional file imports or manually added information in Concur by the client.</p></td>
        </tr>

        <tr>
            <td align="left"><strong><font color="green">PROFESSIONAL</font></strong></td>
            <td align="left"><p>Okta supports provisioning functionality for Concur Professional Edition. Note that Okta only creates a base user record in Concur; you may require file imports for attributes (such as employee banking data) not supported by the Concur API. Many <strong>Expense</strong> features require employee data that User Provisioning applications cannot populate since the current <em>User API</em> does not currently include those features.</p></td>
        </tr>

        <tr>
            <td align="left"><strong><font color="red">PREMIUM</font></strong></td>
            <td align="left"><p>Okta supports provisioning functionality for Concur Premium Edition. Note that Okta only creates a base user record in Concur; you may require file imports for attributes (such as employee banking data) not supported by the Concur API. Many <strong>Expense</strong> features require employee data that User Provisioning applications cannot populate since the current <em>User API</em> does not currently include those features.</p></td>
        </tr>




    </table>




    <h3>Determining Edition Type</h3>
    <p>A client can determine the Concur Edition type by having their administrator login to their Concur site. If they see a <strong>Setup</strong> menu with a sub option for <strong>Expense</strong> within the <strong>Administration</strong> menu (as shown below), then this is a <strong><font color="blue">Standard</font></strong> Edition site. If the client administrator does not see the <strong>Expense</strong> menu within the <strong>Setup</strong> menu, then they have a Concur <strong><font color="green">Professional</font></strong> Edition site:</p>

    <p><p><img src="images/apps/concurnew1.png" alt="concurnew1.png" /></p>



    </ul>
    <hr>

    <a name="requirements"></a><h2>Requirements</h2>
    <ul>

        <li><p><strong>Letter of Authorization (LOA)</strong>: Concur requires a letter of authorization before you can start using Okta for provisioning. If you are implementing Provisioning, or for Provisioning plus Single Sign On (SSO):</p>
            <p>Download the following document, sign it, and scan the signed copy into a pdf file.</p>
            <p><kbd><a href="images/apps/Okta_LOA.pdf" target="_blank">Concur Letter of Authorization - Provisioning or Provisioning plus SSO</a></kbd></p>

            <p>Click the link below to generate a Provisioning Enablement Request email to Concur. Fill in the fields and attach the LOA.</p>
            <p><kbd><a href="mailto:concur_saml_activation@okta.com,partner_client_activation@concur.com?Subject=Provisioning%20Enablement%20Request&Body=Please%20enable%09provisioning%20for%20the%20following%20account.%20The%20signed%20letter%20of%20authorization%20is%20attached.%0A%0ACompany%09Name%3A%0A%0AUser%20Name%3A%0A%0AEmail%3A%0A%0APhone%20%28optional%29%3A%0A%0AThank%20you.">Provisioning Enablement Email</a></kbd></p>
            <p><strong>Note: </strong>If the above link does not generate an email message on your system, open this <a href="images/apps/Concur_Email_Alternate.pdf" target="_blank">Email Text</a> and copy and paste the information into a new email message.</p></li>

        <li><p>Universal Directory for Concur is an <strong>Early Access</strong> feature. If you would like to turn on UD for Concur, contact Okta Support to enable the following feature flag: <strong>PROV_CONCUR_CLOUD_DIRECTORY_ENABLE</strong>.</p></li>

        <li><p>You must have Concur <strong>Expense</strong> service enabled. That is, Concur <strong>Travel</strong> only is not supported.</p></li>

<p>Before you begin setting up the application, go through the <a href="#attributes">Attributes in Base Profile</a> section as you will need to obtain allowed values from the Concur Implementation team, which are associated with special attributes in Concur, such as Ledger Key.</p>


<li><p>Before setting up provisioning, ensure that Web Services subscription is enabled for your Concur tenant. Contact Concur to get the Web Services Administrator Profile set up; this is a one-time required set up. Once the subscription is enabled, you will be able to use the provisioning application in your <strong>Concur Production</strong> tenant. The Okta application is listed globally in Concur Production environment, and no further steps need to be taken to enable the Okta application in you Concur Web Services App center.</p>
<p>Enable the Okta Connect app in the <strong>Concur App</strong> center by following these steps:</p>


            <ol>
                <li><p>Login to Concur (commonly, <a href="https://www.concursolutions.com" target="_blank">https://www.concursolutions.com</a>) with your Concur Admin account.</p></li>
                <li><p>Navigate to <strong>Administration > Company > Web Services</strong>.</p>
                    <p><p><img src="images/apps/concur1.png" alt=“concur1.png" /></p></li>
                <li><p>Navigate to <strong>Enable Partner Application</strong>, then find <strong>Okta Connect</strong> in the list and make sure it is <strong>Enabled</strong>.</p>
                    <p><strong>Note</strong>: Contact Concur to enable the Okta application for your Concur tenant if the application does not appear in the Web Services section.</p>

                    <p><p><img src="images/apps/concur_new1.png" alt=“concur_new1.png" /></p></li>

            </ol>
        </li>
    </ul>
    <hr>

    <a name="configuration"></a><h2>Configuration Steps</h2>

    <p><strong>Important</strong>: Before you start configuring provisioning, make sure you have determined what <a href="#edition">Concur Edition</a> you have, and have also met all the <a href="#requirements">requirements</a> we provided.
        <ol>

            <li><p>Configure your <strong>Provisioning</strong> settings for Concur as follows:</p>
    <ul>
        <li><p>Check the <strong>Enable provisioning features</strong> box.</p></li>
        <li><p>In the <strong>API Authentication</strong> section, click <strong>Authenticate with Concur</strong>:</p>
            <p><p><img src="images/apps/concur4.png" alt=“concur4.png" /></p></li>

        </li>

        <li><p>A new window will appear displaying the Concur login page. Enter your Concur Admin credentials and log in.</p></li>

        <li><p>A message will appear with option to allow Okta to connect to your tenant. Choose <strong>Allow</strong> for provisioning to work.</p>
            <p><p><img src="images/apps/concurnew.png" alt=“concurnew.png" /></p></li>

        </li>


        <li><p>Now your app is authenticated, scroll down the Provisioning page and select those provisioning features you want to enable:</p>
            <p><p><img src="images/apps/concur5.png" alt=“concur.png" /></p></li>

        </li>
        <li><p>Click <strong>Next</strong>.</p></li>

    </ul>
    <li><p>You can now assign people to the app (if needed) and finish the application setup.</p></li>

    <li><p>The required attributes in Concur depend on your Concur tenant settings. Follow the steps bellow to add all required user attributes to the user profile:</p>

        <ul>

            <li><p>In Okta, from the Admin dashboard, select <strong>Directory > Profile Editor</strong>.</p></li>

            <li><p>Select the <strong>APPS</strong> section in the left navigation bar, then find your app in the list.</p>
                <p><p><img src="images/apps/concur6.png" alt=“concur6.png" /></p></li>

            </li>
            <li><p>Select <strong>Add Attribute</strong>, then <strong>Refresh Attribute List</strong> to see the latest list of Concur attributes.</p>

<p>Remember to add all attributes associated to linked-lists in your Concur tenant. For example, if you are using Concur Standard Edition and have policy groups enabled, you will have to add <strong>Expense Policy Group</strong> attribute (<strong>OrgUnit1</strong>) though it will not show as a required attribute. This is because <strong>Expense Policy Group</strong> (<strong>OrgUnit1</strong>) attribute is part of a linked-list with <strong>Employee Administration Country</strong> (<strong>custom21</strong>).
                <p><p><img src="images/apps/concur7.png" alt=“concur7.png" /></p></li>

            <li><p>Required Concur attributes are pre-selected for you on this page. Additionally, you can add more attributes of your choice.</p>
<p><strong>Note</strong>: If you are using <strong>Standard Edition</strong> with Groups enabled, be sure to add the <strong>Expense Policy Group</strong> (orgUnit1) attribute.*</p></li>
            <li><p><strong>Save</strong> the profile.</p></li>


            </li>

            <li><p>Setup is now complete.</p></li>


        </ul>
    </li>

    </ol>

    <hr>

    <a name="attributes"></a><h2>Attributes in Base Profile</h2>

    <p>There are few special attributes in Base user profile, whose values vary depending on your Concur Edition. Pay special attention to these attributes:</p>


    <table class="gridtable">

        <tr>

            <th><strong>Attribute</strong></th>
            <th><strong>Description</strong></th>


        </tr>

        <tr>
            <td align="left"><strong>Locale Name</strong></td>
            <td align="left"><p>Select value from drop down menu. Be sure to select a value that is applicable to your Concur tenant. If a locale value is not enabled in your Concur tenant, this field is left blank on the user's Concur profile, or you may experience errors.</p></li>
                </p>
            </td>
        </tr>

        <tr>
            <td align="left"><strong>Country Code</strong></td>
            <td align="left"><p>Select value from drop down menu. Be sure to select a value that is applicable to your Concur tenant. If a locale value is not enabled in your Concur tenant, this field is left blank on the user's Concur profile, or you may experience errors.</p></td>
        </tr>

        <tr>
            <td align="left"><strong>Currency Key</strong></td>
            <td align="left"><p>Select value from drop down menu. Be sure to select a value that is applicable to your Concur tenant. If a locale value is not enabled in your Concur tenant, this field is left blank on the user's Concur profile, or you may experience errors.</p></td>
        </tr>



       
        <tr>
            <td align="left"><strong>Ledger Key</strong></td>
            <td align="left">
                <ul>
                    <li><p>For <strong><font color ="blue">Concur Standard</font></strong> edition, the value default to be passed is <strong>DEFAULT</strong>. Although this attribute does not appear in your Concur UI, but is required for provisioning. </p></li>
                    <li><p>For <strong><font color ="green">Concur Professional</font>/<font color="red">Premium</font></strong> edition, the Ledger code(s) must be obtained from Concur since the Code is not available in the API and it is not exposed to the client administrator in the Concur UI (<strong>Accounting Administration</strong> menu). You will have to maintain the list of Ledger codes, and plug them in Okta when assigning new users. Contact Concur at <a href="mailto:pdspe@concur.com" target="_blank">pdspe@concur.com</a> to obtain a list of valid Ledger Code(s) relevant to your Concur tenant.</p></li>
                </ul></td>
        </tr>


    </table>
    <p>For these attributes Concur has a pre-defined list of allowed values per tenant, and you will experience errors if you use a wrong value. So make sure you know what to enter here.</p>

    <br />

    <hr>
    <a name="schema"></a><h2>Schema Discovery</h2>



    <p>This application supports Schema Discovery feature, which allows to extend the list of attributes to sync with Concur.</em>.</p>
    <p><img src="images/apps/concur8.png" alt=“concur8.png" /></p>

<p>Concur may have dependency between certain attributes, for example in <strong>Standard Edition</strong> with <strong>Groups</strong> support, <strong>Expense Policy Group</strong> values depend on </strong>Employee Administration Country</strong> value. </p>

    <p><img src="images/apps/concur_new2.png" alt=“concur_new2.png" /></p>


<p>These are identified as linked-lists in your Concur tenant. Another example of linked lists are <strong>Division</strong>, <strong>Department</strong>, and <strong>Cost Center</strong>.</p>
<p>If you are adding one of dependent attributes, make sure you add all attributes it depends on. In other case you won't be able to set a value for it without providing values for it's parent attributes.</p>
 
 
    <hr>

    <a name="tips"></a><h2>Troubleshooting Tips</h2>



    <p>Most common errors are:</p>
    <ul>
        
<li><p>If you see an error that states user e-mail is already taken, contact Concur support and ask to make it available for your tenant.</p>
            <p><img src="images/apps/concur_new3.png" alt=“concur_new3.png" /></p>

</li>

<li><p>Concur's required field was not added to the User profile or had an empty value:</p>
            <p><img src="images/apps/concur10.png" alt=“concur10.png" /></p>
            <p>To fix this, make sure you added the required field to your Application User profile and provide it with a valid value.</p>
        </li>

        <li><p>Set a wrong value to a field, for which valid values are strictly defined:</p>
            <p><img src="images/apps/concur11.png" alt=“concur11.png" /></p>
            <p>To fix this, provide a field with a valid value. Check Schema Discovery section on how to get valid values.</p>
        </li>
    </ul>
    <hr>
    <a name="migration"></a><h2>Migration from Legacy Concur Application to Universal Directory</h2>

    <p>In order to enable UD support for Concur:</p>
    <ol>
        <li><p>Contact Okta support team and request the following feature flag be enabled for your Okta org: <strong>PROV_CONCUR_CLOUD_DIRECTORY_ENABLE</strong>.</p></li>
        <li><p>Once the feature is enabled, add a new instance of the Concur App.
            <p><strong>Note</strong>: We do not recommend reusing your existing instance of the Concur app for UD features.</p></li>
        <li><p>Follow the steps above to configure the new application powered with UD features.</p></li>

</div>
</body>
</html>
